name = "tft-trading-system"
main = "src/index.ts"
compatibility_date = "2025-01-10"
compatibility_flags = ["nodejs_compat"]
account_id = "ed01ccea0b8ee7138058c4378cc83e54"

[env.production]
name = "tft-trading-system"
main = "src/index.ts"

[env.staging]
name = "tft-trading-system-staging"
main = "src/index.ts"

[[env.staging.durable_objects.bindings]]
name = "CACHE_DO"
class_name = "CacheDurableObject"

# KV bindings
[[kv_namespaces]]
binding = "TRADING_RESULTS"
id = "321593c6717448dfb24ea2bd48cde1fa"
preview_id = "220ca67255ed4bfeada7eb6816ce6413"

[[kv_namespaces]]
binding = "CACHE_DO_KV"
id = "4acc96129aba4c4ca3ad5939c2b8792d"
preview_id = "a8c0d3ff9f1f4f0ba9aaa20950675cb4"

# R2 bindings
[[r2_buckets]]
binding = "TFT_TRADING_MODELS"
bucket_name = "tft-trading-models"

# AI bindings
[ai]
binding = "AI"

# Durable Objects for cache
[[durable_objects.bindings]]
name = "CACHE_DO"
class_name = "CacheDurableObject"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["CacheDurableObject"]

# Scheduled events (temporarily disabled)
# [[triggers.crons]]
# cron = "0 9 * * 1-5"  # 9 AM weekdays

# Variables
[vars]
ENVIRONMENT = "production"
WORKER_VERSION = "2.0-enhanced"
LOG_LEVEL = "info"
ENABLE_CACHE = "true"
ENABLE_MIGRATION = "true"
NEW_API_PERCENTAGE = "10"
