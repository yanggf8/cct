# Wrangler configuration for TFT Trading System Worker

name = "tft-trading-system"
main = "src/index.js"
compatibility_date = "2024-01-01"
# account_id moved to environment variable for security

# Enhanced multi-cron system with progressive KV state sharing
[triggers]
crons = [
  "30 13 * * 1-5",  # 8:30 AM EST - Generate 2-horizon predictions (1h + 24h) + high-confidence alerts
  "0 17 * * 1-5",   # 12:00 PM EST - Validate morning predictions + generate afternoon forecasts  
  "5 21 * * 1-5",   # 4:05 PM EST - Daily validation report + next-day predictions
  "0 21 * * FRI",   # 4:00 PM EST Friday - Weekly market close report (comprehensive analysis)
  "0 15 * * SUN"    # 10:00 AM EST Sunday - Weekly accuracy report and performance review
]

# KV namespace for storing analysis results
[[kv_namespaces]]
binding = "TRADING_RESULTS"
id = "321593c6717448dfb24ea2bd48cde1fa"
preview_id = "220ca67255ed4bfeada7eb6816ce6413"

# AI binding for Cloudflare Workers AI
[ai]
binding = "AI"

# Environment variables
[vars]
EMAIL_ENABLED = "false"
WORKER_VERSION = "1.0"
TIMEZONE = "America/New_York"

# Secrets to be set via: wrangler secret put SECRET_NAME
# Required for production:
# - MODELSCOPE_API_URL: ModelScope deployment endpoint (e.g., https://your-modelscope-endpoint.com)
# - MODELSCOPE_API_KEY: ModelScope API authentication key (ms-2aa36b9a-e0d8-4b7f-ac59-1bf4ad3d9ec8)
# 
# Optional secrets:
# - SLACK_WEBHOOK_URL: Slack webhook for alerts
# - ALERT_EMAIL: Email address for trading alerts  
# - FACEBOOK_PAGE_TOKEN: Facebook Messenger bot token
# - FACEBOOK_RECIPIENT_ID: Your Facebook user ID
# - LINE_CHANNEL_TOKEN: LINE messaging API token
# - LINE_USER_ID: Your LINE user ID
#
# Example deployment commands:
# wrangler secret put MODELSCOPE_API_URL
# wrangler secret put MODELSCOPE_API_KEY
# wrangler secret put SLACK_WEBHOOK_URL