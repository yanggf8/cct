// Test the data conversion that the Cloudflare Worker should be doing
const sampleYahooData = [
  [150.1, 151.2, 149.8, 150.5, 1500000],
  [150.3, 151.5, 149.9, 150.8, 1600000],
  [150.2, 151.1, 149.7, 150.4, 1400000],
  [150.4, 151.3, 150.0, 150.9, 1700000],
  [150.6, 151.8, 150.2, 151.1, 1800000],
  [151.0, 152.2, 150.5, 151.5, 1900000],
  [151.3, 152.5, 150.8, 151.8, 2000000],
  [151.5, 152.7, 151.0, 152.0, 2100000],
  [151.8, 153.0, 151.3, 152.3, 2200000],
  [152.0, 153.2, 151.5, 152.5, 2300000],
  [152.3, 153.5, 151.8, 152.8, 2400000],
  [152.5, 153.7, 152.0, 153.0, 2500000],
  [152.8, 154.0, 152.3, 153.3, 2600000],
  [153.0, 154.2, 152.5, 153.5, 2700000],
  [153.3, 154.5, 152.8, 153.8, 2800000],
  [153.5, 154.7, 153.0, 154.0, 2900000],
  [153.8, 155.0, 153.3, 154.3, 3000000],
  [154.0, 155.2, 153.5, 154.5, 3100000],
  [154.3, 155.5, 153.8, 154.8, 3200000],
  [154.5, 155.7, 154.0, 155.0, 3300000],
  [154.8, 156.0, 154.3, 155.3, 3400000],
  [155.0, 156.2, 154.5, 155.5, 3500000],
  [155.3, 156.5, 154.8, 155.8, 3600000],
  [155.5, 156.7, 155.0, 156.0, 3700000],
  [155.8, 157.0, 155.3, 156.3, 3800000],
  [156.0, 157.2, 155.5, 156.5, 3900000],
  [156.3, 157.5, 155.8, 156.8, 4000000],
  [156.5, 157.7, 156.0, 157.0, 4100000],
  [156.8, 158.0, 156.3, 157.3, 4200000],
  [157.0, 158.2, 156.5, 157.5, 4300000]
];

// Convert like the worker does
const convertedData = sampleYahooData.map((row, index) => ({
  open: row[0],
  high: row[1], 
  low: row[2],
  close: row[3],
  volume: row[4] || 0,
  date: new Date(Date.now() - (sampleYahooData.length - index - 1) * 24 * 60 * 60 * 1000).toISOString().split('T')[0]
}));

console.log('Sample converted data:');
console.log(JSON.stringify(convertedData.slice(0, 3), null, 2));
console.log(`\nTotal records: ${convertedData.length}`);